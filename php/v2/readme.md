### Тестовое задание для разработчика на PHP
Мы ожидаем, что Вы:
* найдете и исправите все возможные ошибки (синтаксические, проектирования, безопасности и т.д.);
* отрефакторите код файла `ReturnOperation.php` в лучший по вашему мнению вид;
* напишите в комментарии краткое резюме по коду: назначение кода и его качество.

### Мои комментарии

Первым порывом было все снести и запилить в лучших традициях DDD. Потом я перечитал еще раз данный файл и принял решение менять только код файла `ReturnOperation.php`, ведь именно это написано во втором пункте выше. И потом, предположим, что данный легаси код используется в каком-то проекте и мы не можем ломать логику и структуру этого кода.

В моем понимании этот код нужен для рассылки уведомлений клиентам и сотрудникам при добавлении жалобы или возврате товара, а также при изменении статуса такого обращения. Сотрудникам уведомления направляются на email, клиенту - на email и по смс при наличии указанного номера телефона.

Если это часть CRM-системы, а не просто выдранные куски кода, сложенные в 2 файла - то качество кода, на мой взгляд, не на высоте. Мешать в одну кучу клиентов, продавцов и сотрудников я бы не стал, сделал бы отдельные сущности для этого. Да, у них есть общие поля, такие как id или name, но это не значит, что эти сущности должны наследоваться от общего предка. 

Что касается поиска ошибок, из того, что я заметил:
* безусловно, не очень хорошо одновременно использовать процедурный стиль кода и классический ООП. Те же самые функции `getResellerEmailFrom` и т.п. лучше обернуть в какой-то вспомогательный класс и наследовать его или добавить эти методы в класс `NotificationEvents`
* работать напрямую без дополнительных проверок с $_REQUEST также не выглядит хорошей идеей, хотя бы потому что в этом суперглобальном массиве есть и GET, и POST, и COOKIE - и последнее может вызвать проблемы в некоторых случаях. Помимо этого, для полей запроса я бы использовал простейшие Value object чтобы потом не приходилось каждый раз выполнять преобразование типов или проверять данные на валидность
* включить везде declare(strict_types=1);
* использовать геттеры и изменить доступы к переменным класса id, name, mobile и т.п. с `public` на `private`
* в классе `Contractor` поле `Seller` объявлено в phpDoc, но не описано в перечне переменных класса. И с этим полем тоже лучше работать через геттер, а не так, как это делается в коде ($client->Seller->id)
* в классе `Contractor` описан метод `getById`, код которого предполагает использование конструктора класса `Contractor`, но конструктора нет в коде класса
* в методе `getName` класса `Status` нет проверки на существование индекса, при передаче невалидных данных будет выброшен нотис и логика работы будет нарушена
* класс `MessagesClient` нигде не описан, равно как и класс `NotificationManager`, но предположу что эти классы где-то существуют в этом же namespace, тем не менее, если рассматривать строго эти 2 файла - то это ошибка